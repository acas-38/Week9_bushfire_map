{
"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 860,
  "height": 600,
  "config": { "view": { "stroke": null } },
  "projection": { "type": "mercator","center": [134, -28],   
  "scale": 850  },
  "title": "Victoria bushfires (2009) â€” area burnt (ha)",
  "layer": [
    { "name": "ocean", "data": { "sphere": {} }, "mark": { "type": "geoshape", "fill": "#dbeefb" } },
    {
      "name": "graticule",
      "data": { "graticule": { "step": [10, 10] } },
      "mark": { "type": "geoshape", "stroke": "#94a3b8", "strokeWidth": 0.6, "strokeOpacity": 0.6 }
    },
    {
      "name": "land_au",
      "data": {
        "url": "https://raw.githubusercontent.com/vega/vega-datasets/master/data/world-110m.json",
        "format": { "type": "topojson", "feature": "countries" }
      },
      "transform": [{ "filter": "datum.id == 36" }],
      "mark": { "type": "geoshape", "fill": "#f6f6f6", "stroke": "#666", "strokeWidth": 0.6 }
    },


    {
      "name": "state_borders",
      "data": {
        "url": "https://raw.githubusercontent.com/rowanhogan/australian-states/master/states.geojson",
        "format": { "type": "json" }
      },
      "mark": { "type": "geoshape", "filled": false, "stroke": "#374151", "strokeWidth": 1 }
    },

  
    {
      "name": "state_labels",
      "data": {
        "values": [
          { "name": "Western Australia",           "lon": 122.0, "lat": -26.0 },
          { "name": "Northern Territory",          "lon": 133.0, "lat": -19.0 },
          { "name": "South Australia",             "lon": 135.5, "lat": -30.5 },
          { "name": "Queensland",                  "lon": 144.0, "lat": -20.5 },
          { "name": "New South Wales",             "lon": 147.0, "lat": -32.0 },
          { "name": "Victoria",                    "lon": 145.5, "lat": -37.0 },
          { "name": "Tasmania",                    "lon": 146.8, "lat": -42.0 },
          { "name": "Australian Capital Territory","lon": 149.1, "lat": -35.5 }
        ]
      },
      "mark": { "type": "text", "fontSize": 12, "fontWeight": "bold", "fill": "#374151" },
      "encoding": {
        "longitude": { "field": "lon", "type": "quantitative" },
        "latitude":  { "field": "lat", "type": "quantitative" },
        "text":      { "field": "name" },
        "dy":        { "value": 0 }
      }
    },

 
    {
      "name": "fires2009_points",
      "data": {
        "values": [
          { "fire_id": "101245", "year": 2009, "fire_type": "Wildfire", "severity": "Severe",  "area_ha": 5400, "lon": 147.300, "lat": -37.000 },
          { "fire_id": "101246", "year": 2009, "fire_type": "Wildfire", "severity": "Extreme", "area_ha": 8750, "lon": 148.100, "lat": -36.500 },
          { "fire_id": "101247", "year": 2009, "fire_type": "Planned burn", "severity": "",   "area_ha":  320, "lon": 145.000, "lat": -38.050 }
        ]
      },
      "transform": [
        { "filter": "toNumber(datum.year) == 2009" },
        { "calculate": "toNumber(datum.area_ha)", "as": "area_ha_num" },
        { "filter": "datum.area_ha_num > 0" }
      ],
      "mark": { "type": "circle", "opacity": 0.8 },
      "encoding": {
        "longitude": { "field": "lon", "type": "quantitative" },
        "latitude":  { "field": "lat", "type": "quantitative" },
        "size": {
          "field": "area_ha_num",
          "type": "quantitative",
          "title": "Area (ha)",
          "scale": { "type": "sqrt", "range": [10, 1000] }
        },
        "color": { "field": "fire_type", "type": "nominal", "title": "Fire type" },
        "tooltip": [
          { "field": "fire_id", "title": "Fire ID" },
          { "field": "fire_type", "title": "Type" },
          { "field": "severity", "title": "Severity" },
          { "field": "area_ha_num", "title": "Area (ha)", "format": "," }
        ]
      }
    }
  ]
}
